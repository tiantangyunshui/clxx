(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1dd1b69a"],{"57c7":function(e,r,s){},dd7b:function(e,r,s){"use strict";s.r(r);var o=function(){var e=this,r=e.$createElement,s=e._self._c||r;return s("van-form",{staticClass:"login-form",attrs:{id:"school-wrap"},on:{submit:e.onSubmit}},[s("div",{staticClass:"login-form-body"},[s("div",{staticClass:"login-form-role"},[e._v(" "+e._s("student"===e.roleName?"学生登录":"教师登录")+" ")]),s("van-field",{attrs:{name:"username","left-icon":"manager",placeholder:"student"===e.roleName?"请输入学生号":"请输入手机号",rules:"student"===e.roleName?[{required:!0,message:"学生号不能为空"}]:[{required:!0,message:"手机号不能为空"}]},model:{value:e.loginForm.username,callback:function(r){e.$set(e.loginForm,"username",r)},expression:"loginForm.username"}}),s("van-field",{staticClass:"login-form-password",attrs:{type:e.pwdType,name:"password","left-icon":"lock",placeholder:"请输入密码",rules:[{required:!0,message:"密码不能为空"}]},scopedSlots:e._u([{key:"button",fn:function(){return[s("div",{staticClass:"login-show-password",class:e.showPassword?"operate-eye-close":"operate-eye-open",on:{click:e.handleShowPassword}})]},proxy:!0}]),model:{value:e.loginForm.password,callback:function(r){e.$set(e.loginForm,"password",r)},expression:"loginForm.password"}}),s("van-checkbox",{staticClass:"login-form-remember",attrs:{shape:"square"},model:{value:e.loginForm.rememberMe,callback:function(r){e.$set(e.loginForm,"rememberMe",r)},expression:"loginForm.rememberMe"}},[e._v("记住密码")]),s("div",{staticStyle:{margin:"16px"}},[s("van-button",{attrs:{round:"",block:"",type:"info","native-type":"submit"}},[e._v(" 登 录 ")])],1)],1)])},t=[],a=s("93da"),n=s.n(a),i="MIIBUwIBADANBgkqhkiG9w0BAQEFAASCAT0wggE5AgEAAkEA0vfvyTdGJkdbHkB8\nmp0f3FE0GYP3AYPaJF7jUd1M0XxFSE2ceK3k2kw20YvQ09NJKk+OMjWQl9WitG9p\nB6tSCQIDAQABAkA2SimBrWC2/wvauBuYqjCFwLvYiRYqZKThUS3MZlebXJiLB+Ue\n/gUifAAKIg1avttUZsHBHrop4qfJCwAI0+YRAiEA+W3NK/RaXtnRqmoUUkb59zsZ\nUBLpvZgQPfj1MhyHDz0CIQDYhsAhPJ3mgS64NbUZmGWuuNKp5coY2GIj/zYDMJp6\nvQIgUueLFXv/eZ1ekgz2Oi67MNCk5jeTF2BurZqNLR3MSmUCIFT3Q6uHMtsB9Eha\n4u7hS31tj1UWE+D+ADzp59MGnoftAiBeHT7gDMuqeJHPL4b+kC+gzV4FGTfhR9q3\ntTbklZkD2A==";function m(e){var r=new n.a;return r.setPrivateKey(i),r.decrypt(e)}var l=s("e04f"),u=s.n(l),d={name:"Login",data:function(){return{redirect:void 0,showPassword:!1,roleName:"",pwdType:"password",loginForm:{username:"",password:"",rememberMe:!1}}},watch:{$route:{handler:function(e){this.redirect=e.query&&e.query.redirect},immediate:!0}},created:function(){this.getCookie()},mounted:function(){if(this.$route.query&&this.$route.query.roleName){this.roleName=this.$route.query.roleName;var e=this.checkTel(this.loginForm.username);"student"===this.roleName?e&&this.clearCount():e||this.clearCount()}},methods:{getCookie:function(){var e=u.a.get("username"),r=u.a.get("password"),s=u.a.get("rememberMe");this.loginForm={username:void 0===e?this.loginForm.username:e,password:void 0===r?this.loginForm.password:m(r),rememberMe:void 0!==s&&Boolean(s)}},onSubmit:function(e){var r=this;this.loginForm.rememberMe?(u.a.set("username",this.loginForm.username,{expires:30}),u.a.set("password",this.$md5(this.loginForm.password),{expires:30}),u.a.set("rememberMe",this.loginForm.rememberMe,{expires:30})):(u.a.remove("username"),u.a.remove("password"),u.a.remove("rememberMe"));var s=this.checkTel(e.username);"teacher"!==this.roleName||s?(e={username:e.username,password:this.$md5(e.password)},this.$store.dispatch("Login",e).then((function(e){200!==e.code?r.$toast(e.msg):r.$router.push({path:r.redirect||"/",query:{roleName:r.roleName}})}))):this.$toast("手机号格式不正确")},handleShowPassword:function(){this.pwdType="password"===this.pwdType?"text":"password",this.showPassword=!this.showPassword},checkTel:function(e){var r=/^[1][3,4,5,7,8][0-9]{9}$/;return r.test(e)},clearCount:function(){this.loginForm={username:"",password:"",rememberMe:!1}}}},c=d,h=(s("e16d"),s("5d22")),p=Object(h["a"])(c,o,t,!1,null,"6822c78b",null);r["default"]=p.exports},e16d:function(e,r,s){"use strict";s("57c7")}}]);