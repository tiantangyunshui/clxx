(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["app"],{0:function(e,t,n){e.exports=n("56d7")},"03c2":function(e,t,n){var r={"./apply.js":"9313","./login.js":"f085"};function a(e){var t=o(e);return n(t)}function o(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}a.keys=function(){return Object.keys(r)},a.resolve=o,e.exports=a,a.id="03c2"},4360:function(e,t,n){"use strict";var r=n("a593"),a=n("7736"),o={userName:function(e){return e.user.userName},token:function(e){return e.user.token},permission_routes:function(e){return e.user.routes},routersList:function(e){return e.user.routersList},roles:function(e){return e.user.roles},phone:function(e){return e.user.phone},roleType:function(e){return e.user.roleType},studentNum:function(e){return e.user.studentNum},avatar:function(e){return e.user.avatar},roleId:function(e){return e.user.roleId}},u=o,c=(n("16ca"),n("ea94"),n("27ae"),n("1d43"),n("fc13"),n("9b5f"),n("f23b")),i=n("61f7"),s=n("5f1f"),f=n("f085"),l={state:{token:Object(i["a"])(),userName:"",routes:[],routersList:[],roles:[],phone:"",roleType:"",roleId:"",avatar:"",studentNum:""},mutations:{SET_TOKEN:function(e,t){e.token=t},SET_ROUTES:function(e,t){e.routersList=t,e.routes=c["b"].concat(t)},SET_AVATAR:function(e,t){e.avatar=t},SET_ROLES:function(e,t){e.roles=t},SET_NAME:function(e,t){e.userName=t},SET_PHONE:function(e,t){e.phone=t},SET_ROLE_TYPE:function(e,t){e.roleType=t},SET_STUDENT_NUMBER:function(e,t){e.studentNum=t},SET_ROLE_ID:function(e,t){e.roleId=t}},actions:{Login:function(e,t){var n=e.commit,r={name:t.username.trim(),pwd:t.password};return new Promise((function(e,t){Object(f["login"])(r).then((function(t){var r=t.data;r&&(Object(i["c"])(r.token),n("SET_TOKEN",r.token)),e(t)}))}))},setUserName:function(e,t){var n=e.commit;n("SET_USER_NAME",t)},GetInfo:function(e){var t=e.commit,r=e.state;return new Promise((function(e,a){Object(f["userInfo"])(r.token).then((function(r){var a=r.data,o=a&&a.user&&a.user.faceImg?a.user.faceImg:n("b31e");if(a&&a.user){var u=a.user;u.roles&&u.roles.length>0?t("SET_ROLES",u.roles):t("SET_ROLES",["ROLE_DEFAULT"]),t("SET_NAME",u.name),t("SET_AVATAR",o),t("SET_PHONE",u.phone),t("SET_ROLE_TYPE",u.type),t("SET_STUDENT_NUMBER",u.no),t("SET_ROLE_ID",u.id)}e(r)})).catch((function(e){a(e)}))}))},FedLogOut:function(e){var t=e.commit;return new Promise((function(e){t("SET_TOKEN",""),t("SET_ROLES",[]),Object(i["b"])(),window.location.replace("/MaterialsSchool/schoolMobile/index.html"),e()}))},GenerateRoutes:function(e,t){return new Promise((function(n){var r=t.roles,a=Object(s["filterAsyncRouter"])(c["a"],r);e.commit("SET_ROUTES",a),n()}))}}},d=l;r["a"].use(a["a"]);var p=new a["a"].Store({modules:{user:d},getters:u});t["a"]=p},"56d7":function(e,t,n){"use strict";n.r(t);n("eaed");var r=n("b46d"),a=(n("31e1"),n("8d9b"),n("3b2b"),n("736a"),n("64a6"),n("6a61"),n("a593")),o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("router-view")],1)},u=[],c={name:"App"},i=c,s=n("5d22"),f=Object(s["a"])(i,o,u,!1,null,null,null),l=f.exports,d=(n("3337"),n("27ae"),n("feb3"),n("fc13"),n("9b5f"),n("03c2")),p={};d.keys().map((function(e){"./module/index.js"!==e&&(p[e.replace(/(\.\/|\.js)/g,"")]=d(e).default)}));var h=p,m=n("6abc"),b=n("8aaf"),v=n("f23b"),g=n("38bc"),E=n.n(g),O=(n("70e7"),n("61f7")),T=n("4360");E.a.configure({showSpinner:!1});var y=b["a"].prototype.push;b["a"].prototype.push=function(e,t,n){return t||n?y.call(this,e,t,n):y.call(this,e).catch((function(e){return e}))},a["a"].use(b["a"]);var j=function(){return new b["a"]({scrollBehavior:function(){return{y:0}},routes:v["b"]})},S=j();var _=["/roleSelect","/login"];S.beforeEach((function(e,t,n){E.a.start(),e.meta.title&&(document.title=e.meta.title),Object(O["a"])()?"/roleSelect"===e.path?(n({path:"/"}),E.a.done()):0===T["a"].getters.roles.length?T["a"].dispatch("GetInfo").then((function(t){var r=t.roles;T["a"].dispatch("GenerateRoutes",{roles:r}).then((function(){S.addRoutes(T["a"].getters.permission_routes),n(Object(m["a"])(Object(m["a"])({},e),{},{replace:!0}))}))})).catch((function(){T["a"].dispatch("FedLogOut").then((function(){E.a.done()}))})):n():-1!==_.indexOf(e.path)?n():(n("/roleSelect?redirect=".concat(e.fullPath)),E.a.done())})),S.afterEach((function(){E.a.done()}));var k=S,w=n("897d"),R=n.n(w),A=(n("46b2"),n("f44b")),N=(n("ecd8"),n("7af3")),L=(n("4a26"),n("fb03")),D=(n("5b1c"),n("4232")),P=(n("6f77"),n("a121")),x=(n("2fa1"),n("097f")),I=(n("4208"),n("aa4d")),U=(n("319a"),n("0a6c")),$=(n("1a69"),n("3356")),M=(n("dc8b"),n("6665")),C=(n("8cda"),n("6c78")),F=(n("e859"),n("770f")),G=(n("7735"),n("39b4")),B=(n("e78f"),n("8785")),H=(n("c54f"),n("0641")),K=(n("dc16"),n("e3d6")),Y=(n("cd6e"),n("157a")),z=(n("820e"),n("a56d")),J=(n("18a2"),n("c3ea")),V=(n("0397"),n("f1c0")),q=(n("f01ad"),n("5b64")),Q=(n("f6c7"),n("2f3f")),W=(n("206c"),n("c4e7"));a["a"].use(W["a"]),a["a"].use(Q["a"]),a["a"].use(q["a"]),a["a"].use(V["a"]),a["a"].use(z["a"]).use(J["a"]),a["a"].use(K["a"]).use(Y["a"]),a["a"].use(H["a"]),a["a"].use(B["a"]),a["a"].use(G["a"]),a["a"].use(F["a"]),a["a"].use(C["a"]),a["a"].use(M["a"]),a["a"].use($["a"]),a["a"].use(U["a"]),a["a"].use(I["a"]),a["a"].use(x["a"]),a["a"].use(V["a"]),a["a"].use(P["a"]),a["a"].use(D["a"]),a["a"].use(L["a"]),a["a"].use(N["a"]),a["a"].use(M["a"]),a["a"].use(A["a"]);n("9536"),n("44ce"),n("3bae"),n("62f9"),n("e3b5");var X=n("5f1f");Object.keys(X).forEach((function(e){return a["a"].filter(e,X[e])})),a["a"].prototype.$formatDate=a["a"].filter("formatDate"),a["a"].prototype.$hidePhone=a["a"].filter("hidePhone"),a["a"].config.productionTip=!1,a["a"].prototype.Toast=r["a"],a["a"].prototype.$api=h,a["a"].prototype.$md5=R.a,new a["a"]({el:"#app",router:k,store:T["a"],render:function(e){return e(l)}})},"5f1f":function(e,t,n){"use strict";n.r(t),n.d(t,"formatDate",(function(){return r})),n.d(t,"hidePhone",(function(){return o})),n.d(t,"hasPermission",(function(){return u})),n.d(t,"filterAsyncRouter",(function(){return c}));n("fc13"),n("9b5f"),n("f566"),n("d447"),n("b3b0"),n("a5f8"),n("e3b5");function r(e,t){if(void 0!==e){var n=new Date(e);/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(n.getFullYear()+"").substr(4-RegExp.$1.length)));var r={"M+":n.getMonth()+1,"d+":n.getDate(),"h+":n.getHours(),"m+":n.getMinutes(),"s+":n.getSeconds()};for(var o in r)if(new RegExp("(".concat(o,")")).test(t)){var u=r[o]+"";t=t.replace(RegExp.$1,1===RegExp.$1.length?u:a(u))}return t}}function a(e){return("00"+e).substr(e.length)}function o(e){return e.replace(/(\d{3})\d{4}(\d{4})/,"$1****$2")}function u(e,t){if(t.meta&&t.meta.roles){for(var n=!1,r=0,a=e.length;r<a;r++)if(n=t.meta.roles.includes(e[r]),n)return!0;return!1}return!0}function c(e,t){return e.filter((function(e){return!!u(t,e)&&(e.children&&e.children.length&&(e.children=c(e.children,t)),!0)}))}},"61f7":function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"c",(function(){return c})),n.d(t,"b",(function(){return i}));n("ea94");var r=n("e04f"),a=n.n(r);var o="token";function u(){return a.a.get(o)}function c(e){return a.a.set(o,e)}function i(){return a.a.remove(o)}},9313:function(e,t,n){"use strict";n.r(t);var r=n("b775");t["default"]={infoList:function(e){return Object(r["a"])({url:"apply/phone/list?page="+e.paging.page+"&size="+e.paging.size,method:"post",data:e.listData,type:"json"})},teacherNameData:function(e){return Object(r["a"])({url:"user/teacher",method:"get",data:e,type:"json"})},addApplyData:function(e){return Object(r["a"])({url:"apply/add",method:"post",data:e,type:"json"})},updApprovalData:function(e){return Object(r["a"])({url:"apply/upd",method:"put",data:e,type:"json"})}}},9536:function(e,t,n){},b31e:function(e,t,n){e.exports=n.p+"static/img/profile.5096812f.png"},b775:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));n("eaed");var r=n("b46d"),a=(n("27ae"),n("82ae")),o=n.n(a),u=n("4360"),c=n("fed1"),i=n.n(c);function s(e){var t=e.url,n=e.data,r=e.method,a=void 0===r?"get":r,u=e.type,c=void 0===u?"json":u,s=e.timestamp,f=void 0!==s&&s,l={method:a,url:t,responseType:"json",headers:{}};if("get"===a)f&&(l.url+=l.url.indexOf("?")>0?"&":"?",l.url+="timestamp=".concat(+new Date)),Object.assign(l,{params:n});else if("form"===c)l.headers["Content-Type"]="application/x-www-form-urlencoded",Object.assign(l,{data:i.a.stringify(n)});else if("json"===c)l.headers["Content-Type"]="application/json",Object.assign(l,{data:n});else if("formData"===c){var d=new FormData;for(var p in n)d.append(p,n[p]);l.headers["Content-Type"]="multipart/form-data",Object.assign(l,{data:d})}return new Promise((function(e,t){o()(l).then((function(t){e(t)}),(function(e){t(e)})).catch((function(e){t(e)}))}))}o.a.defaults.baseURL="http://fangke.shclgc.net:8088/",o.a.interceptors.request.use((function(e){return e.hideloading||r["a"].loading({forbidClick:!0}),u["a"].getters.token&&(e.headers["token"]=u["a"].getters.token),e}),(function(e){return console.log(e),Promise.reject(e)})),o.a.interceptors.response.use((function(e){r["a"].clear();var t=e.data;return t.code&&200!==t.code?(401===t.code?u["a"].dispatch("FedLogOut").then((function(){location.reload()})):500===t.code&&(r["a"].clear(),Object(r["a"])({message:t.msg,position:"center"})),Promise.reject(t||"error")):Promise.resolve(t)}),(function(e){return r["a"].clear(),Object(r["a"])({message:"网络异常，请稍后再试",position:"center"}),console.log("err"+e),Promise.reject(e)}))},f085:function(e,t,n){"use strict";n.r(t),n.d(t,"login",(function(){return a})),n.d(t,"userInfo",(function(){return o}));var r=n("b775");function a(e){return Object(r["a"])({url:"login",method:"get",data:e})}function o(e){return Object(r["a"])({url:"user/student",method:"get",data:e})}},f23b:function(e,t,n){"use strict";n.d(t,"b",(function(){return f})),n.d(t,"a",(function(){return l}));n("27ae"),n("591f"),n("feb3");var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"app-container"},[n("div",{staticClass:"layout-content"},[e.$route.meta.keepAlive?n("keep-alive",[n("router-view")],1):n("router-view")],1)])},a=[],o={name:"AppLayout"},u=o,c=n("5d22"),i=Object(c["a"])(u,r,a,!1,null,null,null),s=i.exports,f=[{path:"/redirect",component:s,children:[{path:"/redirect/:path(.*)",component:function(e){return n.e("chunk-2d0f012d").then(function(){var t=[n("9b8f")];e.apply(null,t)}.bind(this)).catch(n.oe)}}]},{path:"/404",component:function(e){return n.e("chunk-750a88d0").then(function(){var t=[n("8cdb")];e.apply(null,t)}.bind(this)).catch(n.oe)},hidden:!0},{path:"/roleSelect",component:function(e){return n.e("chunk-527fd390").then(function(){var t=[n("401b")];e.apply(null,t)}.bind(this)).catch(n.oe)}},{path:"/login",component:function(e){return Promise.all([n.e("chunk-2d0e560d"),n.e("chunk-1dd1b69a")]).then(function(){var t=[n("dd7b")];e.apply(null,t)}.bind(this)).catch(n.oe)}}],l=[{path:"*",redirect:"/404"},{path:"/",component:s,redirect:"/applyApproval",meta:{title:"首页",keepAlive:!1},children:[{path:"/apply",name:"Apply",component:function(){return n.e("chunk-7bd71a5c").then(n.bind(null,"8fd0"))},meta:{title:"外出返校申请",keepAlive:!1}},{path:"/applyApproval",name:"ApplyApproval",component:function(){return n.e("chunk-c564e67e").then(n.bind(null,"9794"))},meta:{title:"申请审批页面",keepAlive:!1}}]}]}},[[0,"runtime","chunk-vantUI","chunk-libs"]]]);